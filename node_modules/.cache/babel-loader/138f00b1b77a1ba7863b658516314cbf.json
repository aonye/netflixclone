{"ast":null,"code":"import _regeneratorRuntime from\"/home/yeandyy/Documents/the_odin_project/netflixclone/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/yeandyy/Documents/the_odin_project/netflixclone/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"/home/yeandyy/Documents/the_odin_project/netflixclone/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _asyncToGenerator from\"/home/yeandyy/Documents/the_odin_project/netflixclone/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/yeandyy/Documents/the_odin_project/netflixclone/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _excluded=[\"children\"];import React,{useEffect,useState}from'react';import{BrowserRouter,Route,Switch,Redirect,useHistory,withRouter}from'react-router-dom';import{createUserWithEmailAndPassword,signInWithEmailAndPassword,onAuthStateChanged}from\"firebase/auth\";import{auth}from'../firebase/firebase';import SignIn from'../components/SignIn';import SignUp from'../components/SignUp';import Nav from'../components/Nav';import Home from'../components/Home';import Dashboard from'../components/Dashboard';import Account from'../components/Account';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Router=function Router(props){var _useState=useState(localStorage.getItem('authState')),_useState2=_slicedToArray(_useState,2),authState=_useState2[0],setAuthState=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];console.log(authState,'authstate');//localStorage.clear();\nonAuthStateChanged(auth,function(user){if(user){// User is signed in, see docs for a list of available properties\n// https://firebase.google.com/docs/reference/js/firebase.User\nvar uid=user.uid;console.log('authed, router.js');setAuthState(true);localStorage.setItem('authState',true);// ...\n}else{// User is signed out\n// ...\n}});function submitHandSignIn(_x){return _submitHandSignIn.apply(this,arguments);}function _submitHandSignIn(){_submitHandSignIn=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();console.log('prevented Submit');case 2:case\"end\":return _context.stop();}}},_callee);}));return _submitHandSignIn.apply(this,arguments);}function PrivateRoute(_ref){var children=_ref.children,rest=_objectWithoutProperties(_ref,_excluded);console.log('children:',children,'rest:',rest,authState);console.log(localStorage.getItem('authState'));return/*#__PURE__*/_jsx(Route,_objectSpread(_objectSpread({},rest),{},{render:function render(){return authState!==null?children:/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}}));}function createUser(_x2,_x3){return _createUser.apply(this,arguments);}function _createUser(){_createUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(email,password){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:createUserWithEmailAndPassword(auth,email,password).then(function(userCredential){var user=userCredential.user;console.log(user,'user - createUser');}).catch(function(error){var errorCode=error.code;var errorMessage=error.message;console.log('error occured',errorCode,errorMessage);});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return _createUser.apply(this,arguments);}function signInUser(_x4,_x5){return _signInUser.apply(this,arguments);}function _signInUser(){_signInUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(email,password){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:signInWithEmailAndPassword(auth,email,password).then(function(userCredential){console.log('sign in successful',userCredential.user);}).catch(function(error){var errorCode=error.code;var errorMessage=error.message;console.log('sign in error',errorCode,errorMessage);});case 1:case\"end\":return _context3.stop();}}},_callee3);}));return _signInUser.apply(this,arguments);}return/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",children:authState===null?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Nav,{setEmail:setEmail,showSignIn:true}),/*#__PURE__*/_jsx(Home,{email:email,setEmail:setEmail})]}):/*#__PURE__*/_jsx(Redirect,{to:\"/dashboard\"})}),/*#__PURE__*/_jsxs(PrivateRoute,{exact:true,path:\"/dashboard\",children:[/*#__PURE__*/_jsx(Nav,{setEmail:setEmail,setAuthState:setAuthState,showProfile:true}),/*#__PURE__*/_jsx(Dashboard,{})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Nav,{setEmail:setEmail}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/signin\",children:/*#__PURE__*/_jsx(SignIn,{signInUser:signInUser})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/signup\",children:/*#__PURE__*/_jsx(SignUp,{createUser:createUser,setAuthState:setAuthState,email:email})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/account\",children:/*#__PURE__*/_jsx(Account,{})})]})]})});};export default withRouter(Router);//render = {() => <Dashboard email={email}\n// <Nav setEmail={setEmail} showSignIn={true} />\n// <Home email={email} setEmail={setEmail} />\n// async function setDB() {\n//   await setDoc(doc(db, \"hiscores\", \"0\"), {\n//     name: \"Anonymous\",\n//     time: 90000,\n//   });\n//   await setDoc(doc(db, \"hiscores\", \"1\"), {\n//     name: \"Nyancat\",\n//     time: 95000,\n//   });\n//   await setDoc(doc(db, \"hiscores\", \"2\"), {\n//     name: \"Spike Spiegel\",\n//     time: 100000,\n//   });\n//   await setDoc(doc(db, \"hiscores\", \"3\"), {\n//     name: \"Monkey D. Luffy\",\n//     time: 120000,\n//   });\n//   await setDoc(doc(db, \"hiscores\", \"4\"), {\n//     name: \"Naruto Uzumaki\",\n//     time: 300000,\n//   });\n// }\n// setDB();","map":{"version":3,"sources":["/home/yeandyy/Documents/the_odin_project/netflixclone/src/routing/Router.js"],"names":["React","useEffect","useState","BrowserRouter","Route","Switch","Redirect","useHistory","withRouter","createUserWithEmailAndPassword","signInWithEmailAndPassword","onAuthStateChanged","auth","SignIn","SignUp","Nav","Home","Dashboard","Account","Router","props","localStorage","getItem","authState","setAuthState","email","setEmail","console","log","user","uid","setItem","submitHandSignIn","e","preventDefault","PrivateRoute","children","rest","createUser","password","then","userCredential","catch","error","errorCode","code","errorMessage","message","signInUser"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { BrowserRouter, Route, Switch, Redirect, useHistory, withRouter } from 'react-router-dom';\nimport { createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged } from \"firebase/auth\";\nimport { auth } from '../firebase/firebase';\nimport SignIn from '../components/SignIn';\nimport SignUp from '../components/SignUp';\nimport Nav from '../components/Nav';\nimport Home from '../components/Home';\nimport Dashboard from '../components/Dashboard';\nimport Account from '../components/Account';\n\nconst Router = (props) => {\n    const [authState, setAuthState] = useState(localStorage.getItem('authState'));\n    const [email, setEmail] = useState(null);\n    console.log(authState, 'authstate');\n\n    //localStorage.clear();\n\n    onAuthStateChanged(auth, (user) => {\n        if (user) {\n            // User is signed in, see docs for a list of available properties\n            // https://firebase.google.com/docs/reference/js/firebase.User\n            const uid = user.uid;\n            console.log('authed, router.js');\n            setAuthState(true);\n            localStorage.setItem('authState', true);\n            // ...\n        } else {\n            // User is signed out\n            // ...\n        }\n    });\n\n    async function submitHandSignIn(e) {\n        e.preventDefault();\n        console.log('prevented Submit');\n    }\n\n    function PrivateRoute({ children, ...rest }) {\n        console.log('children:', children, 'rest:', rest, authState);\n        console.log(localStorage.getItem('authState'));\n        return (\n            <Route {...rest} render={() => {\n                return authState !== null\n                    ? children\n                    : <Redirect to='/' />\n            }} />\n        )\n    }\n\n    async function createUser(email, password) {\n        createUserWithEmailAndPassword(auth, email, password)\n            .then((userCredential) => {\n                const user = userCredential.user;\n                console.log(user, 'user - createUser');\n            })\n            .catch((error) => {\n                const errorCode = error.code;\n                const errorMessage = error.message;\n                console.log('error occured', errorCode, errorMessage);\n            });\n    }\n\n    async function signInUser(email, password) {\n        signInWithEmailAndPassword(auth, email, password)\n            .then((userCredential) => {\n                console.log('sign in successful', userCredential.user);\n            })\n            .catch((error) => {\n                const errorCode = error.code;\n                const errorMessage = error.message;\n                console.log('sign in error', errorCode, errorMessage);\n            });\n    }\n\n    return (\n        <BrowserRouter>\n            <Switch>\n                <Route exact path='/'>\n                    {authState === null ?\n                        (\n                            <div>\n                                <Nav setEmail={setEmail} showSignIn={true} />\n                                <Home email={email} setEmail={setEmail} />\n                            </div>\n                        ) :\n                        <Redirect to='/dashboard' />\n                    }\n                </Route>\n                <PrivateRoute exact path='/dashboard'>\n                    <Nav setEmail={setEmail} setAuthState={setAuthState} showProfile={true} />\n                    <Dashboard />\n                </PrivateRoute>\n                <div>\n                    <Nav setEmail={setEmail} />\n                    <Route exact path='/signin'>\n                        <SignIn signInUser={signInUser} />\n                    </Route>\n                    <Route exact path='/signup'>\n                        <SignUp createUser={createUser} setAuthState={setAuthState} email={email} />\n                    </Route>\n                    <Route exact path='/account'>\n                        <Account />\n                    </Route>\n                </div>\n            </Switch>\n        </BrowserRouter >\n    );\n};\n\nexport default withRouter(Router);\n\n//render = {() => <Dashboard email={email}\n\n\n                    // <Nav setEmail={setEmail} showSignIn={true} />\n                    // <Home email={email} setEmail={setEmail} />\n\n// async function setDB() {\n//   await setDoc(doc(db, \"hiscores\", \"0\"), {\n//     name: \"Anonymous\",\n//     time: 90000,\n//   });\n//   await setDoc(doc(db, \"hiscores\", \"1\"), {\n//     name: \"Nyancat\",\n//     time: 95000,\n//   });\n//   await setDoc(doc(db, \"hiscores\", \"2\"), {\n//     name: \"Spike Spiegel\",\n//     time: 100000,\n//   });\n//   await setDoc(doc(db, \"hiscores\", \"3\"), {\n//     name: \"Monkey D. Luffy\",\n//     time: 120000,\n//   });\n//   await setDoc(doc(db, \"hiscores\", \"4\"), {\n//     name: \"Naruto Uzumaki\",\n//     time: 300000,\n//   });\n// }\n\n// setDB();"]},"metadata":{},"sourceType":"module"}