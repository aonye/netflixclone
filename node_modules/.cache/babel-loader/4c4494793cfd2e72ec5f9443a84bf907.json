{"ast":null,"code":"import _regeneratorRuntime from\"/home/yeandyy/Documents/the_odin_project/netflixclone/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/yeandyy/Documents/the_odin_project/netflixclone/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/home/yeandyy/Documents/the_odin_project/netflixclone/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"/home/yeandyy/Documents/the_odin_project/netflixclone/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _slicedToArray from\"/home/yeandyy/Documents/the_odin_project/netflixclone/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _excluded=[\"children\"],_excluded2=[\"children\"];import{updateProfile,createUserWithEmailAndPassword,signInWithEmailAndPassword,onAuthStateChanged}from\"firebase/auth\";import{useState}from'react';import{BrowserRouter,Route,Switch,Redirect,withRouter}from'react-router-dom';import{auth}from'../firebase/firebase';import AuthMsg from'../components/AuthMsg';import SignIn from'../components/SignIn';import SignUp from'../components/SignUp';import Nav from'../components/Nav';import{NavMediaBar,Profile,SignInBtn}from'../components/Nav_components/index';import films from'../assets/films/index';import series from'../assets/series/index';import Home from'../components/Home';import Dashboard from'../components/Dashboard';import Account from'../components/Account';import Username from\"../components/Username\";import Footer from'../components/Footer';import{customMsg}from'../helper/helper';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Router=function Router(props){var _useState=useState({films:films}),_useState2=_slicedToArray(_useState,2),mediaType=_useState2[0],setMediaType=_useState2[1];//films default\nvar _useState3=useState(Object.keys({films:films})),_useState4=_slicedToArray(_useState3,2),MTKey=_useState4[0],setMTKey=_useState4[1];var _useState5=useState(localStorage.getItem('authState')),_useState6=_slicedToArray(_useState5,2),authState=_useState6[0],setAuthState=_useState6[1];//null if not found\nvar _useState7=useState(),_useState8=_slicedToArray(_useState7,2),name=_useState8[0],setName=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),email=_useState10[0],setEmail=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),signInMsg=_useState12[0],setSIMsg=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),signUpMsg=_useState14[0],setSUMsg=_useState14[1];onAuthStateChanged(auth,function(user){if(user){console.log(user,'authed');localStorage.setItem('authState',JSON.stringify(user));setName(user.displayName);setEmail(user.email);}else{console.log(user,'not authed');localStorage.removeItem('authState');}});function PrivateRoute(_ref){var children=_ref.children,rest=_objectWithoutProperties(_ref,_excluded);return/*#__PURE__*/_jsx(Route,_objectSpread(_objectSpread({},rest),{},{render:function render(){return authState!==null?children:/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}}));}function RouteWrap(_ref2){var children=_ref2.children,rest=_objectWithoutProperties(_ref2,_excluded2);return/*#__PURE__*/_jsx(Route,_objectSpread(_objectSpread({},rest),{},{render:function render(){return authState===null?children:/*#__PURE__*/_jsx(Redirect,{to:\"/dashboard\"});}}));}function createUser(_x,_x2,_x3){return _createUser.apply(this,arguments);}function _createUser(){_createUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email,password,name){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:createUserWithEmailAndPassword(auth,email,password).then(function(userCredential){//const user = userCredential.user;\nsetAuthState(auth.currentUser);updateProfile(auth.currentUser,{displayName:\"\".concat(name)});setSUMsg(/*#__PURE__*/_jsx(AuthMsg,{useClass:'auth-success',msg:customMsg('auth/sign-up-success')}));}).catch(function(error){var errorCode=error.code;//console.log('error occured', errorCode, errorMessage);\nsetSUMsg(/*#__PURE__*/_jsx(AuthMsg,{useClass:\"auth-error\",msg:customMsg(errorCode)}));});case 1:case\"end\":return _context.stop();}}},_callee);}));return _createUser.apply(this,arguments);}function signInUser(_x4,_x5){return _signInUser.apply(this,arguments);}function _signInUser(){_signInUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(email,password){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:signInWithEmailAndPassword(auth,email,password).then(function(userCredential){//console.log('sign in successful', userCredential.user);\nsetAuthState(auth.currentUser);setSIMsg(/*#__PURE__*/_jsx(AuthMsg,{useClass:\"auth-success\",msg:customMsg('auth/sign-in-success')}));}).catch(function(error){var errorCode=error.code;//console.log('sign in error', error, errorCode, errorMessage);\nsetSIMsg(/*#__PURE__*/_jsx(AuthMsg,{useClass:\"auth-error\",msg:customMsg(errorCode)}));});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return _signInUser.apply(this,arguments);}return/*#__PURE__*/_jsxs(BrowserRouter,{children:[/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsxs(RouteWrap,{exact:true,path:\"/\",children:[/*#__PURE__*/_jsx(Nav,{SignInBtn:/*#__PURE__*/_jsx(SignInBtn,{})}),/*#__PURE__*/_jsx(Home,{setEmail:setEmail})]}),/*#__PURE__*/_jsxs(RouteWrap,{exact:true,path:\"/signin\",children:[/*#__PURE__*/_jsx(Nav,{}),/*#__PURE__*/_jsx(SignIn,{signInUser:signInUser,signInMsg:signInMsg,setSIMsg:setSIMsg,authState:authState})]}),/*#__PURE__*/_jsxs(RouteWrap,{exact:true,path:\"/signup\",children:[/*#__PURE__*/_jsx(Nav,{}),/*#__PURE__*/_jsx(SignUp,{email:email,createUser:createUser,signUpMsg:signUpMsg,setSUMsg:setSUMsg,authState:authState})]}),/*#__PURE__*/_jsxs(PrivateRoute,{exact:true,path:\"/dashboard\",children:[/*#__PURE__*/_jsx(Nav,{NavMediaBar:/*#__PURE__*/_jsx(NavMediaBar,{setMediaType:setMediaType,setMTKey:setMTKey,films:films,series:series}),Profile:/*#__PURE__*/_jsx(Profile,{setAuthState:setAuthState,name:name,email:email})}),/*#__PURE__*/_jsx(Dashboard,{mediaType:mediaType,MTKey:MTKey})]}),/*#__PURE__*/_jsxs(PrivateRoute,{exact:true,path:\"/account\",children:[/*#__PURE__*/_jsx(Nav,{}),/*#__PURE__*/_jsx(Account,{setEmail:setEmail})]}),/*#__PURE__*/_jsxs(PrivateRoute,{exact:true,path:\"/username\",children:[/*#__PURE__*/_jsx(Nav,{}),/*#__PURE__*/_jsx(Username,{name:name,setName:setName})]})]}),/*#__PURE__*/_jsx(Footer,{})]});};export default withRouter(Router);","map":{"version":3,"sources":["/home/yeandyy/Documents/the_odin_project/netflixclone/src/routing/Router.js"],"names":["updateProfile","createUserWithEmailAndPassword","signInWithEmailAndPassword","onAuthStateChanged","useState","BrowserRouter","Route","Switch","Redirect","withRouter","auth","AuthMsg","SignIn","SignUp","Nav","NavMediaBar","Profile","SignInBtn","films","series","Home","Dashboard","Account","Username","Footer","customMsg","Router","props","mediaType","setMediaType","Object","keys","MTKey","setMTKey","localStorage","getItem","authState","setAuthState","name","setName","email","setEmail","signInMsg","setSIMsg","signUpMsg","setSUMsg","user","console","log","setItem","JSON","stringify","displayName","removeItem","PrivateRoute","children","rest","RouteWrap","createUser","password","then","userCredential","currentUser","catch","error","errorCode","code","signInUser"],"mappings":"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","sourcesContent":["import {\n    updateProfile,\n    createUserWithEmailAndPassword,\n    signInWithEmailAndPassword,\n    onAuthStateChanged,\n} from \"firebase/auth\";\nimport { useState } from 'react';\nimport { BrowserRouter, Route, Switch, Redirect, withRouter } from 'react-router-dom';\nimport { auth } from '../firebase/firebase';\nimport AuthMsg from '../components/AuthMsg';\nimport SignIn from '../components/SignIn';\nimport SignUp from '../components/SignUp';\nimport Nav from '../components/Nav';\nimport { NavMediaBar, Profile, SignInBtn } from '../components/Nav_components/index';\nimport films from '../assets/films/index';\nimport series from '../assets/series/index';\nimport Home from '../components/Home';\nimport Dashboard from '../components/Dashboard';\nimport Account from '../components/Account';\nimport Username from \"../components/Username\";\nimport Footer from '../components/Footer';\nimport { customMsg } from '../helper/helper';\n\nconst Router = (props) => {\n    const [mediaType, setMediaType] = useState({ films }); //films default\n    const [MTKey, setMTKey] = useState(Object.keys({ films }));\n\n    const [authState, setAuthState] = useState(localStorage.getItem('authState')); //null if not found\n    const [name, setName] = useState();\n    const [email, setEmail] = useState(null);\n\n    const [signInMsg, setSIMsg] = useState(null);\n    const [signUpMsg, setSUMsg] = useState(null);\n\n    onAuthStateChanged(auth, (user) => {\n        if (user) {\n            console.log(user, 'authed');\n            localStorage.setItem('authState', JSON.stringify(user));\n            setName(user.displayName);\n            setEmail(user.email);\n        } else {\n            console.log(user, 'not authed');\n            localStorage.removeItem('authState');\n        }\n    });\n\n    function PrivateRoute({ children, ...rest }) {\n        return (\n            <Route {...rest} render={() => {\n                return authState !== null\n                    ? children\n                    : <Redirect to='/' />\n            }} />\n        )\n    }\n\n    function RouteWrap({ children, ...rest }) {\n        return (\n            <Route {...rest} render={() => {\n                return authState === null\n                    ? children\n                    : <Redirect to='/dashboard' />\n            }} />\n        );\n    }\n\n    async function createUser(email, password, name) {\n        createUserWithEmailAndPassword(auth, email, password)\n            .then((userCredential) => {\n                //const user = userCredential.user;\n                setAuthState(auth.currentUser);\n                updateProfile(auth.currentUser, {\n                    displayName: `${name}`,\n                });\n                setSUMsg(<AuthMsg useClass={'auth-success'} msg={customMsg('auth/sign-up-success')} />);\n            })\n            .catch((error) => {\n                const errorCode = error.code;\n                //console.log('error occured', errorCode, errorMessage);\n                setSUMsg(<AuthMsg useClass={`auth-error`} msg={customMsg(errorCode)} />)\n            });\n    }\n\n    async function signInUser(email, password) {\n        signInWithEmailAndPassword(auth, email, password)\n            .then((userCredential) => {\n                //console.log('sign in successful', userCredential.user);\n                setAuthState(auth.currentUser);\n                setSIMsg(<AuthMsg useClass={`auth-success`} msg={customMsg('auth/sign-in-success')} />);\n            })\n            .catch((error) => {\n                const errorCode = error.code;\n                //console.log('sign in error', error, errorCode, errorMessage);\n                setSIMsg(<AuthMsg useClass={`auth-error`} msg={customMsg(errorCode)} />);\n            });\n    }\n\n    return (\n        <BrowserRouter>\n            <Switch>\n                <RouteWrap exact path='/'>\n                    <Nav\n                        SignInBtn={<SignInBtn />}\n                    />\n                    <Home setEmail={setEmail} />\n                </RouteWrap>\n                <RouteWrap exact path='/signin'>\n                    <Nav />\n                    <SignIn\n                        signInUser={signInUser}\n                        signInMsg={signInMsg}\n                        setSIMsg={setSIMsg}\n                        authState={authState}\n                    />\n                </RouteWrap >\n                <RouteWrap exact path='/signup'>\n                    <Nav />\n                    <SignUp\n                        email={email}\n                        createUser={createUser}\n                        signUpMsg={signUpMsg}\n                        setSUMsg={setSUMsg}\n                        authState={authState}\n                    />\n                </RouteWrap>\n                <PrivateRoute exact path='/dashboard'>\n                    <Nav\n                        NavMediaBar={<NavMediaBar setMediaType={setMediaType} setMTKey={setMTKey} films={films} series={series} />}\n                        Profile={<Profile setAuthState={setAuthState} name={name} email={email} />}\n                    />\n                    <Dashboard mediaType={mediaType} MTKey={MTKey} />\n                </PrivateRoute>\n                <PrivateRoute exact path='/account'>\n                    <Nav />\n                    <Account\n                        setEmail={setEmail}\n                    />\n                </PrivateRoute>\n                <PrivateRoute exact path='/username'>\n                    <Nav />\n                    <Username\n                        name={name}\n                        setName={setName}\n                    />\n                </PrivateRoute>\n            </Switch>\n            <Footer />\n        </BrowserRouter >\n    );\n};\n\nexport default withRouter(Router);"]},"metadata":{},"sourceType":"module"}