{"ast":null,"code":"var _jsxFileName = \"/home/yeandyy/Documents/the_odin_project/netflixclone/src/routing/Router.js\",\n    _s = $RefreshSig$();\n\nimport { updateEmail, updateProfile, updatePassword, createUserWithEmailAndPassword, signInWithEmailAndPassword } from \"firebase/auth\";\nimport { useState } from 'react';\nimport { BrowserRouter, Route, Switch, Redirect, withRouter } from 'react-router-dom';\nimport { auth } from '../firebase/firebase';\nimport AuthMsg from '../components/AuthMsg';\nimport SignIn from '../components/SignIn';\nimport SignUp from '../components/SignUp';\nimport Nav from '../components/Nav';\nimport { NavMediaBar, Profile, SignInBtn, SignOutBtn } from '../components/Nav_components/index';\nimport films from '../assets/films/index';\nimport series from '../assets/series/index';\nimport Home from '../components/Home';\nimport Dashboard from '../components/Dashboard';\nimport Account from '../components/Account';\nimport Footer from '../components/Footer';\nimport { customMsg } from '../helper/helper';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Router = props => {\n  _s();\n\n  const [mediaType, setMediaType] = useState({\n    films\n  }); //films default\n\n  const [MTKey, setMTKey] = useState(Object.keys({\n    films\n  }));\n  const [authState, setAuthState] = useState(localStorage.getItem('authState')); //account params\n\n  const [displayName, setDN] = useState();\n  const [email, setEmail] = useState(null);\n  const [signInMsg, setSIMsg] = useState(null);\n  const [signUpMsg, setSUMsg] = useState(null);\n  const [acctMsg, setAcctMsg] = useState(null); // onAuthStateChanged(auth, (user) => {\n  //     if (user) {\n  //         //const uid = user.uid;\n  //         // User is signed in, see docs for a list of available properties\n  //         // https://firebase.google.com/docs/reference/js/firebase.User\n  //         console.log(user);\n  //         console.log('authed, router.js');\n  //         setAuthState(true);\n  //         console.log(authState);\n  //     } else {\n  //         // User is signed out\n  //     }\n  // });\n\n  async function saveUserName(authObj, name) {\n    updateProfile(authObj.currentUser, {\n      displayName: `${name}`\n    }).then(() => {\n      console.log('username saved'); // ...\n    }).catch(error => {\n      // An error occurred\n      // ...\n      console.log(error, 'error updating profile');\n    });\n  }\n\n  async function saveUserEmail(authObj, email) {\n    updateEmail(authObj.currentUser, `${email}`).then(() => {// Email updated!\n    }).catch(error => {\n      // An error occurred\n      console.log(error, 'error updating email');\n    });\n  }\n\n  async function saveUserPassword(authObj, pw) {\n    updatePassword(authObj.currentUser, `${pw}`).then(() => {\n      console.log('pw updated'); // Update successful.\n    }).catch(error => {\n      // An error ocurred\n      console.log(error, 'error updating pw');\n    });\n  }\n\n  function PrivateRoute({\n    children,\n    ...rest\n  }) {\n    return /*#__PURE__*/_jsxDEV(Route, { ...rest,\n      render: () => {\n        return authState !== null ? children : /*#__PURE__*/_jsxDEV(Redirect, {\n          to: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 23\n        }, this);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this);\n  }\n\n  async function createUser(email, password, name) {\n    createUserWithEmailAndPassword(auth, email, password).then(userCredential => {\n      //const user = userCredential.user;\n      //console.log(user, 'user/createdUser');\n      saveUserName(auth, name);\n      setSUMsg( /*#__PURE__*/_jsxDEV(AuthMsg, {\n        useClass: 'auth-success',\n        msg: customMsg('auth/sign-up-success')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 26\n      }, this));\n      localStorage.setItem('authState', true);\n      setAuthState(true);\n      setDN(name);\n      setEmail(email);\n    }).catch(error => {\n      const errorCode = error.code; //const errorMessage = error.message;\n      //console.log('error occured', errorCode, errorMessage);\n\n      console.log(errorCode); //setSUMsg(<SUError msg={customMsg(errorCode)} />)\n\n      setSUMsg( /*#__PURE__*/_jsxDEV(AuthMsg, {\n        useClass: `auth-error`,\n        msg: customMsg(errorCode)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 26\n      }, this));\n    });\n  }\n\n  async function signInUser(email, password) {\n    signInWithEmailAndPassword(auth, email, password).then(userCredential => {\n      //console.log('sign in successful', userCredential.user);\n      setSIMsg( /*#__PURE__*/_jsxDEV(AuthMsg, {\n        useClass: `auth-success`,\n        msg: customMsg('auth/sign-in-success')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 26\n      }, this));\n      setAuthState(true);\n    }).catch(error => {\n      const errorCode = error.code; //const errorMessage = error.message;\n      //console.log('sign in error', error, errorCode, errorMessage);\n\n      setSIMsg( /*#__PURE__*/_jsxDEV(AuthMsg, {\n        useClass: `auth-error`,\n        msg: customMsg(errorCode)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 26\n      }, this));\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(BrowserRouter, {\n    children: [/*#__PURE__*/_jsxDEV(Switch, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/\",\n        children: authState === null ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Nav, {\n            setEmail: setEmail,\n            SignInBtn: /*#__PURE__*/_jsxDEV(SignInBtn, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 48\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(Home, {\n            setEmail: setEmail\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(Redirect, {\n          to: \"/dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(PrivateRoute, {\n        exact: true,\n        path: \"/dashboard\",\n        children: [/*#__PURE__*/_jsxDEV(Nav, {\n          email: email,\n          setEmail: setEmail,\n          setAuthState: setAuthState,\n          setMediaType: setMediaType,\n          setMTKey: setMTKey,\n          films: films,\n          series: series,\n          NavMediaBar: /*#__PURE__*/_jsxDEV(NavMediaBar, {\n            setMediaType: setMediaType,\n            setMTKey: setMTKey,\n            films: films,\n            series: series\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 38\n          }, this),\n          Profile: /*#__PURE__*/_jsxDEV(Profile, {\n            setAuthState: setAuthState,\n            email: email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 34\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Dashboard, {\n          mediaType: mediaType,\n          MTKey: MTKey\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(PrivateRoute, {\n        exact: true,\n        path: \"/account\",\n        children: [/*#__PURE__*/_jsxDEV(Nav, {\n          setEmail: setEmail\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Account, {\n          saveUserName: saveUserName,\n          saveUserEmail: saveUserEmail,\n          saveUserPassword: saveUserPassword,\n          displayName: displayName,\n          email: email,\n          acctMsg: acctMsg,\n          setAcctMsg: setAcctMsg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/signin\",\n        children: authState === null ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Nav, {\n            setEmail: setEmail\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(SignIn, {\n            signInUser: signInUser,\n            signInMsg: signInMsg,\n            setSIMsg: setSIMsg,\n            authState: authState\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(Redirect, {\n          to: \"/dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 27\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/signup\",\n        children: authState === null ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Nav, {\n            setEmail: setEmail\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(SignUp, {\n            email: email,\n            createUser: createUser,\n            signUpMsg: signUpMsg,\n            setSUMsg: setSUMsg,\n            authState: authState\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(Redirect, {\n          to: \"/dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 27\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Router, \"xv1KwUXieIe7CGs3CDJ3bT5ITFI=\");\n\n_c = Router;\nexport default _c2 = withRouter(Router);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Router\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/home/yeandyy/Documents/the_odin_project/netflixclone/src/routing/Router.js"],"names":["updateEmail","updateProfile","updatePassword","createUserWithEmailAndPassword","signInWithEmailAndPassword","useState","BrowserRouter","Route","Switch","Redirect","withRouter","auth","AuthMsg","SignIn","SignUp","Nav","NavMediaBar","Profile","SignInBtn","SignOutBtn","films","series","Home","Dashboard","Account","Footer","customMsg","Router","props","mediaType","setMediaType","MTKey","setMTKey","Object","keys","authState","setAuthState","localStorage","getItem","displayName","setDN","email","setEmail","signInMsg","setSIMsg","signUpMsg","setSUMsg","acctMsg","setAcctMsg","saveUserName","authObj","name","currentUser","then","console","log","catch","error","saveUserEmail","saveUserPassword","pw","PrivateRoute","children","rest","createUser","password","userCredential","setItem","errorCode","code","signInUser"],"mappings":"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","sourcesContent":["import {\n    updateEmail,\n    updateProfile,\n    updatePassword,\n    createUserWithEmailAndPassword,\n    signInWithEmailAndPassword,\n} from \"firebase/auth\";\nimport { useState } from 'react';\nimport { BrowserRouter, Route, Switch, Redirect, withRouter } from 'react-router-dom';\nimport { auth } from '../firebase/firebase';\nimport AuthMsg from '../components/AuthMsg';\nimport SignIn from '../components/SignIn';\nimport SignUp from '../components/SignUp';\nimport Nav from '../components/Nav';\nimport { NavMediaBar, Profile, SignInBtn, SignOutBtn } from '../components/Nav_components/index';\nimport films from '../assets/films/index';\nimport series from '../assets/series/index';\nimport Home from '../components/Home';\nimport Dashboard from '../components/Dashboard';\nimport Account from '../components/Account';\nimport Footer from '../components/Footer';\nimport { customMsg } from '../helper/helper';\n\nconst Router = (props) => {\n    const [mediaType, setMediaType] = useState({ films }); //films default\n    const [MTKey, setMTKey] = useState(Object.keys({ films }));\n\n    const [authState, setAuthState] = useState(localStorage.getItem('authState')); //account params\n    const [displayName, setDN] = useState();\n    const [email, setEmail] = useState(null);\n\n    const [signInMsg, setSIMsg] = useState(null);\n    const [signUpMsg, setSUMsg] = useState(null);\n    const [acctMsg, setAcctMsg] = useState(null);\n\n    // onAuthStateChanged(auth, (user) => {\n    //     if (user) {\n    //         //const uid = user.uid;\n    //         // User is signed in, see docs for a list of available properties\n    //         // https://firebase.google.com/docs/reference/js/firebase.User\n    //         console.log(user);\n    //         console.log('authed, router.js');\n    //         setAuthState(true);\n    //         console.log(authState);\n    //     } else {\n    //         // User is signed out\n    //     }\n    // });\n\n    async function saveUserName(authObj, name) {\n        updateProfile(authObj.currentUser, {\n            displayName: `${name}`,\n        }).then(() => {\n            console.log('username saved');\n            // ...\n        }).catch((error) => {\n            // An error occurred\n            // ...\n            console.log(error, 'error updating profile');\n        });\n    }\n\n    async function saveUserEmail(authObj, email) {\n        updateEmail(authObj.currentUser, `${email}`).then(() => {\n            // Email updated!\n        }).catch((error) => {\n            // An error occurred\n            console.log(error, 'error updating email')\n        });\n    }\n\n    async function saveUserPassword(authObj, pw) {\n        updatePassword(authObj.currentUser, `${pw}`).then(() => {\n            console.log('pw updated')\n            // Update successful.\n        }).catch((error) => {\n            // An error ocurred\n            console.log(error, 'error updating pw')\n        });\n    }\n\n    function PrivateRoute({ children, ...rest }) {\n        return (\n            <Route {...rest} render={() => {\n                return authState !== null\n                    ? children\n                    : <Redirect to='/' />\n            }} />\n        )\n    }\n\n    async function createUser(email, password, name) {\n        createUserWithEmailAndPassword(auth, email, password)\n            .then((userCredential) => {\n                //const user = userCredential.user;\n                //console.log(user, 'user/createdUser');\n                saveUserName(auth, name);\n                setSUMsg(<AuthMsg useClass={'auth-success'} msg={customMsg('auth/sign-up-success')} />);\n                localStorage.setItem('authState', true);\n                setAuthState(true);\n                setDN(name);\n                setEmail(email);\n            })\n            .catch((error) => {\n                const errorCode = error.code;\n                //const errorMessage = error.message;\n                //console.log('error occured', errorCode, errorMessage);\n                console.log(errorCode);\n                //setSUMsg(<SUError msg={customMsg(errorCode)} />)\n                setSUMsg(<AuthMsg useClass={`auth-error`} msg={customMsg(errorCode)} />)\n            });\n\n    }\n\n    async function signInUser(email, password) {\n        signInWithEmailAndPassword(auth, email, password)\n            .then((userCredential) => {\n                //console.log('sign in successful', userCredential.user);\n                setSIMsg(<AuthMsg useClass={`auth-success`} msg={customMsg('auth/sign-in-success')} />);\n                setAuthState(true);\n            })\n            .catch((error) => {\n                const errorCode = error.code;\n                //const errorMessage = error.message;\n                //console.log('sign in error', error, errorCode, errorMessage);\n                setSIMsg(<AuthMsg useClass={`auth-error`} msg={customMsg(errorCode)} />);\n            });\n    }\n\n    return (\n        <BrowserRouter>\n            <Switch>\n                <Route exact path='/'>\n                    {authState === null ?\n                        (\n                            <div>\n                                <Nav\n                                    setEmail={setEmail}\n                                    SignInBtn={<SignInBtn />}\n                                />\n                                <Home setEmail={setEmail} />\n                            </div>\n                        ) :\n                        <Redirect to='/dashboard' />\n                    }\n                </Route>\n                <PrivateRoute exact path='/dashboard'>\n                    <Nav\n                        email={email}\n                        setEmail={setEmail}\n                        setAuthState={setAuthState}\n                        setMediaType={setMediaType}\n                        setMTKey={setMTKey}\n                        films={films}\n                        series={series}\n                        NavMediaBar={<NavMediaBar setMediaType={setMediaType} setMTKey={setMTKey} films={films} series={series} />}\n                        Profile={<Profile setAuthState={setAuthState} email={email} />}\n                    />\n                    <Dashboard mediaType={mediaType} MTKey={MTKey} />\n                </PrivateRoute>\n                <PrivateRoute exact path='/account'>\n                    <Nav setEmail={setEmail} />\n                    <Account\n                        saveUserName={saveUserName}\n                        saveUserEmail={saveUserEmail}\n                        saveUserPassword={saveUserPassword}\n                        displayName={displayName}\n                        email={email}\n                        acctMsg={acctMsg}\n                        setAcctMsg={setAcctMsg}\n                    />\n                </PrivateRoute>\n                <Route exact path='/signin'>\n                    {authState === null ?\n                        <div>\n                            <Nav setEmail={setEmail} />\n                            <SignIn\n                                signInUser={signInUser}\n                                signInMsg={signInMsg}\n                                setSIMsg={setSIMsg}\n                                authState={authState}\n                            />\n                        </div>\n                        : <Redirect to='/dashboard' />\n                    }\n                </Route>\n                <Route exact path='/signup'>\n                    {authState === null ?\n                        <div>\n                            <Nav setEmail={setEmail} />\n                            <SignUp\n                                email={email}\n                                createUser={createUser}\n                                signUpMsg={signUpMsg}\n                                setSUMsg={setSUMsg}\n                                authState={authState}\n                            />\n                        </div>\n                        : <Redirect to='/dashboard' />\n                    }\n                </Route>\n            </Switch>\n            <Footer />\n        </BrowserRouter >\n    );\n};\n\nexport default withRouter(Router);"]},"metadata":{},"sourceType":"module"}